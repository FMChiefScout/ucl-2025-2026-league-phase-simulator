<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UCL 2025/26 Match Simulator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #1e3a8a, #4b0082);
            color: #ffffff;
            font-family: 'Roboto', sans-serif;
            overflow-x: hidden;
        }
        .matchday-header {
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .matchday-header:hover {
            background-color: #3b82f6;
        }
        .match-card {
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .match-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }
        .score-input {
            width: 3.5rem;
            text-align: center;
            background-color: #1e40af;
            color: white;
            border: 1px solid #ffffff;
            border-radius: 0.5rem;
            padding: 0.25rem;
            transition: border-color 0.3s;
        }
        .score-input:focus {
            border-color: #34d399;
            outline: none;
        }
        canvas {
            background: #ffffff;
            border-radius: 0.5rem;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
        }
        .legend {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            justify-content: center;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .legend-color {
            width: 1rem;
            height: 1rem;
            border-radius: 0.25rem;
        }
        .rating {
            font-size: 0.9rem;
            padding: 0.2rem 0.5rem;
            border-radius: 0.25rem;
            color: white;
        }
        .rating-high { background-color: #34d399; }
        .rating-mid { background-color: #facc15; }
        .rating-low { background-color: #ef4444; }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: #1e3a8a;
            color: #fff;
            text-align: center;
            border-radius: 0.5rem;
            padding: 0.5rem;
            position: absolute;
            z-index: 10;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
        }
        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
        .action-button {
            transition: background-color 0.3s, transform 0.3s;
        }
        .action-button:hover {
            background-color: #2563eb;
            transform: scale(1.05);
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center p-6">
    <header class="text-center mb-8">
        <h1 class="text-5xl font-bold text-white">UCL 2025/26 League Phase Simulator</h1>
        <p class="text-lg text-gray-300 mt-2">Predict match scores or use AI-generated predictions to see the live league table update!</p>
    </header>
    <div class="w-full max-w-7xl">
        <div class="mb-12">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold text-center">Matches by Matchday</h2>
                <div class="flex space-x-4">
                    <button id="predict-button" class="action-button bg-green-600 text-white px-4 py-2 rounded-lg tooltip">
                        Predict All Scores
                        <span class="tooltip-text">Generates realistic scores based on team ratings and home advantage, using a Poisson model for expected goals.</span>
                    </button>
                    <button id="reset-button" class="action-button bg-blue-600 text-white px-4 py-2 rounded-lg">Reset Scores</button>
                </div>
            </div>
            <div id="matchdays" class="space-y-4"></div>
        </div>
        <div class="mb-12">
            <h2 class="text-3xl font-bold mb-6 text-center">League Table</h2>
            <canvas id="leagueTableCanvas" width="1000" height="1000"></canvas>
            <div class="legend">
                <div class="legend-item"><span class="legend-color" style="background-color: #34d399;"></span> Top 8: Direct to Round of 16</div>
                <div class="legend-item"><span class="legend-color" style="background-color: #facc15;"></span> 9th-24th: Knockout Play-offs</div>
                <div class="legend-item"><span class="legend-color" style="background-color: #ef4444;"></span> 25th-36th: Eliminated</div>
            </div>
        </div>
    </div>

    <script>
        const teamRatings = {
            "Real Madrid": 92, "Manchester City": 90, "Paris Saint-Germain": 89, "Bayern München": 88, "Liverpool": 87, "Arsenal": 86, "Barcelona": 85,
            "Inter": 84, "Chelsea": 83, "Juventus": 82, "Atlético de Madrid": 81, "Borussia Dortmund": 80, "Tottenham": 79, "Leverkusen": 78,
            "Newcastle United": 77, "Benfica": 76, "Napoli": 75, "Ajax": 74, "Atalanta": 73, "Marseille": 72, "Villarreal": 71, "Sporting CP": 70,
            "Monaco": 69, "PSV Eindhoven": 68, "Frankfurt": 67, "Galatasaray": 66, "Club Brugge": 65, "Union Saint-Gilloise": 64, "Athletic Club": 63,
            "Copenhagen": 62, "Slavia Praha": 61, "Olympiacos": 60, "Bodø/Glimt": 59, "Qarabağ": 58, "Kairat Almaty": 55, "Pafos": 50
        };

        const matches = [
            [
                { home: "Athletic Club", away: "Arsenal", date: "16/09/2025", time: "18:45" },
                { home: "PSV Eindhoven", away: "Union Saint-Gilloise", date: "16/09/2025", time: "18:45" },
                { home: "Juventus", away: "Borussia Dortmund", date: "16/09/2025", time: "21:00" },
                { home: "Real Madrid", away: "Marseille", date: "16/09/2025", time: "21:00" },
                { home: "Benfica", away: "Qarabağ", date: "16/09/2025", time: "21:00" },
                { home: "Tottenham", away: "Villarreal", date: "16/09/2025", time: "21:00" },
                { home: "Olympiacos", away: "Pafos", date: "17/09/2025", time: "18:45" },
                { home: "Slavia Praha", away: "Bodø/Glimt", date: "17/09/2025", time: "18:45" },
                { home: "Ajax", away: "Inter", date: "17/09/2025", time: "21:00" },
                { home: "Bayern München", away: "Chelsea", date: "17/09/2025", time: "21:00" },
                { home: "Liverpool", away: "Atlético de Madrid", date: "17/09/2025", time: "21:00" },
                { home: "Paris Saint-Germain", away: "Atalanta", date: "17/09/2025", time: "21:00" },
                { home: "Club Brugge", away: "Monaco", date: "18/09/2025", time: "18:45" },
                { home: "Copenhagen", away: "Leverkusen", date: "18/09/2025", time: "18:45" },
                { home: "Frankfurt", away: "Galatasaray", date: "18/09/2025", time: "21:00" },
                { home: "Manchester City", away: "Napoli", date: "18/09/2025", time: "21:00" },
                { home: "Newcastle United", away: "Barcelona", date: "18/09/2025", time: "21:00" },
                { home: "Sporting CP", away: "Kairat Almaty", date: "18/09/2025", time: "21:00" }
            ],
            [
                { home: "Atalanta", away: "Club Brugge", date: "30/09/2025", time: "18:45" },
                { home: "Kairat Almaty", away: "Real Madrid", date: "30/09/2025", time: "18:45" },
                { home: "Atlético de Madrid", away: "Frankfurt", date: "30/09/2025", time: "21:00" },
                { home: "Chelsea", away: "Benfica", date: "30/09/2025", time: "21:00" },
                { home: "Inter", away: "Slavia Praha", date: "30/09/2025", time: "21:00" },
                { home: "Bodø/Glimt", away: "Tottenham", date: "30/09/2025", time: "21:00" },
                { home: "Galatasaray", away: "Liverpool", date: "30/09/2025", time: "21:00" },
                { home: "Marseille", away: "Ajax", date: "30/09/2025", time: "21:00" },
                { home: "Pafos", away: "Bayern München", date: "30/09/2025", time: "21:00" },
                { home: "Qarabağ", away: "Copenhagen", date: "01/10/2025", time: "18:45" },
                { home: "Union Saint-Gilloise", away: "Newcastle United", date: "01/10/2025", time: "18:45" },
                { home: "Arsenal", away: "Olympiacos", date: "01/10/2025", time: "21:00" },
                { home: "Monaco", away: "Manchester City", date: "01/10/2025", time: "21:00" },
                { home: "Leverkusen", away: "PSV Eindhoven", date: "01/10/2025", time: "21:00" },
                { home: "Borussia Dortmund", away: "Athletic Club", date: "01/10/2025", time: "21:00" },
                { home: "Barcelona", away: "Paris Saint-Germain", date: "01/10/2025", time: "21:00" },
                { home: "Napoli", away: "Sporting CP", date: "01/10/2025", time: "21:00" },
                { home: "Villarreal", away: "Juventus", date: "01/10/2025", time: "21:00" }
            ],
            [
                { home: "Barcelona", away: "Olympiacos", date: "21/10/2025", time: "18:45" },
                { home: "Kairat Almaty", away: "Pafos", date: "21/10/2025", time: "18:45" },
                { home: "Arsenal", away: "Atlético de Madrid", date: "21/10/2025", time: "21:00" },
                { home: "Leverkusen", away: "Paris Saint-Germain", date: "21/10/2025", time: "21:00" },
                { home: "Copenhagen", away: "Borussia Dortmund", date: "21/10/2025", time: "21:00" },
                { home: "Newcastle United", away: "Benfica", date: "21/10/2025", time: "21:00" },
                { home: "PSV Eindhoven", away: "Napoli", date: "21/10/2025", time: "21:00" },
                { home: "Union Saint-Gilloise", away: "Inter", date: "21/10/2025", time: "21:00" },
                { home: "Villarreal", away: "Manchester City", date: "21/10/2025", time: "21:00" },
                { home: "Athletic Club", away: "Qarabağ", date: "22/10/2025", time: "18:45" },
                { home: "Galatasaray", away: "Bodø/Glimt", date: "22/10/2025", time: "18:45" },
                { home: "Monaco", away: "Tottenham", date: "22/10/2025", time: "21:00" },
                { home: "Atalanta", away: "Slavia Praha", date: "22/10/2025", time: "21:00" },
                { home: "Chelsea", away: "Ajax", date: "22/10/2025", time: "21:00" },
                { home: "Frankfurt", away: "Liverpool", date: "22/10/2025", time: "21:00" },
                { home: "Bayern München", away: "Club Brugge", date: "22/10/2025", time: "21:00" },
                { home: "Real Madrid", away: "Juventus", date: "22/10/2025", time: "21:00" },
                { home: "Sporting CP", away: "Marseille", date: "22/10/2025", time: "21:00" }
            ],
            [
                { home: "Slavia Praha", away: "Arsenal", date: "04/11/2025", time: "18:45" },
                { home: "Napoli", away: "Frankfurt", date: "04/11/2025", time: "18:45" },
                { home: "Atlético de Madrid", away: "Union Saint-Gilloise", date: "04/11/2025", time: "21:00" },
                { home: "Bodø/Glimt", away: "Monaco", date: "04/11/2025", time: "21:00" },
                { home: "Juventus", away: "Sporting CP", date: "04/11/2025", time: "21:00" },
                { home: "Liverpool", away: "Real Madrid", date: "04/11/2025", time: "21:00" },
                { home: "Olympiacos", away: "PSV Eindhoven", date: "04/11/2025", time: "21:00" },
                { home: "Paris Saint-Germain", away: "Bayern München", date: "04/11/2025", time: "21:00" },
                { home: "Tottenham", away: "Copenhagen", date: "04/11/2025", time: "21:00" },
                { home: "Pafos", away: "Villarreal", date: "05/11/2025", time: "18:45" },
                { home: "Qarabağ", away: "Chelsea", date: "05/11/2025", time: "18:45" },
                { home: "Ajax", away: "Galatasaray", date: "05/11/2025", time: "21:00" },
                { home: "Club Brugge", away: "Barcelona", date: "05/11/2025", time: "21:00" },
                { home: "Inter", away: "Kairat Almaty", date: "05/11/2025", time: "21:00" },
                { home: "Manchester City", away: "Borussia Dortmund", date: "05/11/2025", time: "21:00" },
                { home: "Newcastle United", away: "Athletic Club", date: "05/11/2025", time: "21:00" },
                { home: "Marseille", away: "Atalanta", date: "05/11/2025", time: "21:00" },
                { home: "Benfica", away: "Leverkusen", date: "05/11/2025", time: "21:00" }
            ],
            [
                { home: "Ajax", away: "Benfica", date: "25/11/2025", time: "18:45" },
                { home: "Galatasaray", away: "Union Saint-Gilloise", date: "25/11/2025", time: "18:45" },
                { home: "Borussia Dortmund", away: "Villarreal", date: "25/11/2025", time: "21:00" },
                { home: "Chelsea", away: "Barcelona", date: "25/11/2025", time: "21:00" },
                { home: "Bodø/Glimt", away: "Juventus", date: "25/11/2025", time: "21:00" },
                { home: "Manchester City", away: "Leverkusen", date: "25/11/2025", time: "21:00" },
                { home: "Marseille", away: "Newcastle United", date: "25/11/2025", time: "21:00" },
                { home: "Slavia Praha", away: "Athletic Club", date: "25/11/2025", time: "21:00" },
                { home: "Napoli", away: "Qarabağ", date: "25/11/2025", time: "21:00" },
                { home: "Copenhagen", away: "Kairat Almaty", date: "26/11/2025", time: "18:45" },
                { home: "Pafos", away: "Monaco", date: "26/11/2025", time: "18:45" },
                { home: "Arsenal", away: "Bayern München", date: "26/11/2025", time: "21:00" },
                { home: "Atlético de Madrid", away: "Inter", date: "26/11/2025", time: "21:00" },
                { home: "Frankfurt", away: "Atalanta", date: "26/11/2025", time: "21:00" },
                { home: "Liverpool", away: "PSV Eindhoven", date: "26/11/2025", time: "21:00" },
                { home: "Olympiacos", away: "Real Madrid", date: "26/11/2025", time: "21:00" },
                { home: "Paris Saint-Germain", away: "Tottenham", date: "26/11/2025", time: "21:00" },
                { home: "Sporting CP", away: "Club Brugge", date: "26/11/2025", time: "21:00" }
            ],
            [
                { home: "Kairat Almaty", away: "Olympiacos", date: "09/12/2025", time: "16:30" },
                { home: "Bayern München", away: "Sporting CP", date: "09/12/2025", time: "18:45" },
                { home: "Monaco", away: "Galatasaray", date: "09/12/2025", time: "21:00" },
                { home: "Atalanta", away: "Chelsea", date: "09/12/2025", time: "21:00" },
                { home: "Barcelona", away: "Frankfurt", date: "09/12/2025", time: "21:00" },
                { home: "Inter", away: "Liverpool", date: "09/12/2025", time: "21:00" },
                { home: "PSV Eindhoven", away: "Atlético de Madrid", date: "09/12/2025", time: "21:00" },
                { home: "Union Saint-Gilloise", away: "Marseille", date: "09/12/2025", time: "21:00" },
                { home: "Tottenham", away: "Slavia Praha", date: "09/12/2025", time: "21:00" },
                { home: "Qarabağ", away: "Ajax", date: "10/12/2025", time: "18:45" },
                { home: "Villarreal", away: "Copenhagen", date: "10/12/2025", time: "18:45" },
                { home: "Athletic Club", away: "Paris Saint-Germain", date: "10/12/2025", time: "21:00" },
                { home: "Leverkusen", away: "Newcastle United", date: "10/12/2025", time: "21:00" },
                { home: "Borussia Dortmund", away: "Bodø/Glimt", date: "10/12/2025", time: "21:00" },
                { home: "Club Brugge", away: "Arsenal", date: "10/12/2025", time: "21:00" },
                { home: "Juventus", away: "Pafos", date: "10/12/2025", time: "21:00" },
                { home: "Real Madrid", away: "Manchester City", date: "10/12/2025", time: "21:00" },
                { home: "Benfica", away: "Napoli", date: "09/12/2025", time: "21:00" }
            ],
            [
                { home: "Kairat Almaty", away: "Club Brugge", date: "20/01/2026", time: "16:30" },
                { home: "Bodø/Glimt", away: "Manchester City", date: "20/01/2026", time: "18:45" },
                { home: "Copenhagen", away: "Napoli", date: "20/01/2026", time: "21:00" },
                { home: "Inter", away: "Arsenal", date: "20/01/2026", time: "21:00" },
                { home: "Olympiacos", away: "Leverkusen", date: "20/01/2026", time: "21:00" },
                { home: "Real Madrid", away: "Monaco", date: "20/01/2026", time: "21:00" },
                { home: "Sporting CP", away: "Paris Saint-Germain", date: "20/01/2026", time: "21:00" },
                { home: "Tottenham", away: "Borussia Dortmund", date: "20/01/2026", time: "21:00" },
                { home: "Villarreal", away: "Ajax", date: "20/01/2026", time: "21:00" },
                { home: "Galatasaray", away: "Atlético de Madrid", date: "21/01/2026", time: "18:45" },
                { home: "Qarabağ", away: "Frankfurt", date: "21/01/2026", time: "18:45" },
                { home: "Atalanta", away: "Athletic Club", date: "21/01/2026", time: "21:00" },
                { home: "Chelsea", away: "Pafos", date: "21/01/2026", time: "21:00" },
                { home: "Bayern München", away: "Union Saint-Gilloise", date: "21/01/2026", time: "21:00" },
                { home: "Juventus", away: "Benfica", date: "21/01/2026", time: "21:00" },
                { home: "Newcastle United", away: "PSV Eindhoven", date: "21/01/2026", time: "21:00" },
                { home: "Marseille", away: "Liverpool", date: "21/01/2026", time: "21:00" },
                { home: "Slavia Praha", away: "Barcelona", date: "21/01/2026", time: "21:00" }
            ],
            [
                { home: "Ajax", away: "Olympiacos", date: "28/01/2026", time: "21:00" },
                { home: "Arsenal", away: "Kairat Almaty", date: "28/01/2026", time: "21:00" },
                { home: "Monaco", away: "Juventus", date: "28/01/2026", time: "21:00" },
                { home: "Athletic Club", away: "Sporting CP", date: "28/01/2026", time: "21:00" },
                { home: "Atlético de Madrid", away: "Bodø/Glimt", date: "28/01/2026", time: "21:00" },
                { home: "Leverkusen", away: "Villarreal", date: "28/01/2026", time: "21:00" },
                { home: "Borussia Dortmund", away: "Inter", date: "28/01/2026", time: "21:00" },
                { home: "Club Brugge", away: "Marseille", date: "28/01/2026", time: "21:00" },
                { home: "Frankfurt", away: "Tottenham", date: "28/01/2026", time: "21:00" },
                { home: "Barcelona", away: "Copenhagen", date: "28/01/2026", time: "21:00" },
                { home: "Liverpool", away: "Qarabağ", date: "28/01/2026", time: "21:00" },
                { home: "Manchester City", away: "Galatasaray", date: "28/01/2026", time: "21:00" },
                { home: "Pafos", away: "Slavia Praha", date: "28/01/2026", time: "21:00" },
                { home: "Paris Saint-Germain", away: "Newcastle United", date: "28/01/2026", time: "21:00" },
                { home: "PSV Eindhoven", away: "Bayern München", date: "28/01/2026", time: "21:00" },
                { home: "Union Saint-Gilloise", away: "Atalanta", date: "28/01/2026", time: "21:00" },
                { home: "Benfica", away: "Real Madrid", date: "28/01/2026", time: "21:00" },
                { home: "Napoli", away: "Chelsea", date: "28/01/2026", time: "21:00" }
            ]
        ];

        const teams = [
            "Ajax", "Arsenal", "Atalanta", "Athletic Club", "Atlético de Madrid", "Barcelona", "Bayern München",
            "Benfica", "Bodø/Glimt", "Borussia Dortmund", "Chelsea", "Club Brugge", "Copenhagen", "Frankfurt",
            "Galatasaray", "Inter", "Juventus", "Kairat Almaty", "Leverkusen", "Liverpool", "Manchester City",
            "Marseille", "Monaco", "Napoli", "Newcastle United", "Olympiacos", "Pafos", "Paris Saint-Germain",
            "PSV Eindhoven", "Qarabağ", "Real Madrid", "Slavia Praha", "Sporting CP", "Tottenham", "Union Saint-Gilloise", "Villarreal"
        ];

        let leagueTable = teams.map(team => ({
            team,
            played: 0,
            won: 0,
            drawn: 0,
            lost: 0,
            goalsFor: 0,
            goalsAgainst: 0,
            goalDifference: 0,
            points: 0,
            rating: teamRatings[team]
        }));

        function poissonRandomNumber(lambda) {
            let L = Math.exp(-lambda);
            let k = 0;
            let p = 1;
            do {
                k++;
                p *= Math.random();
            } while (p > L);
            return k - 1;
        }

        function predictScore(homeTeam, awayTeam) {
            const homeRating = teamRatings[homeTeam] || 50;
            const awayRating = teamRatings[awayTeam] || 50;
            const ratingDiff = (homeRating - awayRating) / 100;
            const homeBaseXG = 1.5 + ratingDiff * 0.5;
            const awayBaseXG = 1.2 - ratingDiff * 0.5;
            const homeXG = Math.max(0, homeBaseXG + 0.3); // Home advantage
            const awayXG = Math.max(0, awayBaseXG);
            const homeGoals = poissonRandomNumber(homeXG);
            const awayGoals = poissonRandomNumber(awayXG);
            return [homeGoals, awayGoals];
        }

        function updateLeagueTable() {
            leagueTable = teams.map(team => ({
                team,
                played: 0,
                won: 0,
                drawn: 0,
                lost: 0,
                goalsFor: 0,
                goalsAgainst: 0,
                goalDifference: 0,
                points: 0,
                rating: teamRatings[team]
            }));

            matches.flat().forEach((match, index) => {
                const homeInput = document.getElementById(`home-score-${index}`);
                const awayInput = document.getElementById(`away-score-${index}`);
                if (homeInput && awayInput && homeInput.value !== "" && awayInput.value !== "") {
                    const homeGoals = parseInt(homeInput.value) || 0;
                    const awayGoals = parseInt(awayInput.value) || 0;

                    if (homeGoals < 0 || awayGoals < 0) return;

                    const homeTeam = leagueTable.find(t => t.team === match.home);
                    const awayTeam = leagueTable.find(t => t.team === match.away);

                    if (homeTeam && awayTeam) {
                        homeTeam.played++;
                        awayTeam.played++;
                        homeTeam.goalsFor += homeGoals;
                        homeTeam.goalsAgainst += awayGoals;
                        awayTeam.goalsFor += awayGoals;
                        awayTeam.goalsAgainst += homeGoals;
                        homeTeam.goalDifference = homeTeam.goalsFor - homeTeam.goalsAgainst;
                        awayTeam.goalDifference = awayTeam.goalsFor - awayTeam.goalsAgainst;

                        if (homeGoals > awayGoals) {
                            homeTeam.won++;
                            homeTeam.points += 3;
                            awayTeam.lost++;
                        } else if (awayGoals > homeGoals) {
                            awayTeam.won++;
                            awayTeam.points += 3;
                            homeTeam.lost++;
                        } else {
                            homeTeam.drawn++;
                            awayTeam.drawn++;
                            homeTeam.points++;
                            awayTeam.points++;
                        }
                    }
                }
            });

            leagueTable.sort((a, b) => {
                if (b.points !== a.points) return b.points - a.points;
                if (b.goalDifference !== a.goalDifference) return b.goalDifference - a.goalDifference;
                return b.goalsFor - a.goalsFor;
            });

            drawLeagueTable();
        }

        function drawLeagueTable() {
            const canvas = document.getElementById("leagueTableCanvas");
            const ctx = canvas.getContext("2d");
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = "#1e3a8a";
            ctx.fillRect(0, 0, canvas.width, 50);
            ctx.fillStyle = "#ffffff";
            ctx.font = "bold 18px Roboto";
            const headers = ["Pos", "Team", "Rating", "P", "W", "D", "L", "GF", "GA", "GD", "Pts"];
            const colWidths = [60, 250, 80, 60, 60, 60, 60, 60, 60, 60, 60];
            let x = 20;
            headers.forEach((header, i) => {
                ctx.fillText(header, x, 35);
                x += colWidths[i];
            });

            leagueTable.forEach((team, index) => {
                const y = 50 + (index + 1) * 25;
                ctx.fillStyle = index < 8 ? "#34d399" : index < 24 ? "#facc15" : "#ef4444";
                ctx.globalAlpha = 0.8;
                ctx.fillRect(0, y - 20, canvas.width, 25);
                ctx.globalAlpha = 1.0;
                ctx.fillStyle = "#000000";
                ctx.font = "16px Roboto";
                x = 20;
                [
                    index + 1,
                    team.team,
                    team.rating,
                    team.played,
                    team.won,
                    team.drawn,
                    team.lost,
                    team.goalsFor,
                    team.goalsAgainst,
                    team.goalDifference,
                    team.points
                ].forEach((value, i) => {
                    ctx.fillText(value, x, y);
                    x += colWidths[i];
                });
            });
        }

        function renderMatches() {
            const matchdaysDiv = document.getElementById("matchdays");
            matches.forEach((matchday, dayIndex) => {
                const matchdayDiv = document.createElement("div");
                matchdayDiv.className = "bg-gray-900 rounded-lg shadow-lg overflow-hidden";
                matchdayDiv.innerHTML = `
                    <div class="matchday-header bg-blue-600 p-4 flex justify-between items-center">
                        <h3 class="text-xl font-bold">Matchday ${dayIndex + 1}</h3>
                        <svg class="w-6 h-6 transform transition-transform duration-300 matchday-toggle" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </div>
                    <div class="matchday-content p-4 hidden grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    </div>
                `;
                const contentDiv = matchdayDiv.querySelector(".matchday-content");
                matchday.forEach((match, matchIndex) => {
                    const globalIndex = matches.slice(0, dayIndex).reduce((sum, md) => sum + md.length, 0) + matchIndex;
                    const matchDiv = document.createElement("div");
                    matchDiv.className = "match-card bg-gray-800 p-4 rounded-lg flex flex-col space-y-2";
                    matchDiv.innerHTML = `
                        <div class="flex justify-between items-center">
                            <div class="flex-1 text-center font-semibold">
                                <span class="tooltip">
                                    ${match.home}
                                    <span class="rating ${teamRatings[match.home] >= 85 ? 'rating-high' : teamRatings[match.home] >= 65 ? 'rating-mid' : 'rating-low'}">${teamRatings[match.home]}</span>
                                    <span class="tooltip-text">Team strength rating based on last 3 seasons' UEFA coefficients, goals, and squad value.</span>
                                </span>
                            </div>
                            <div class="flex space-x-2 items-center">
                                <input type="number" id="home-score-${globalIndex}" class="score-input" min="0" placeholder="0">
                                <span class="text-lg">-</span>
                                <input type="number" id="away-score-${globalIndex}" class="score-input" min="0" placeholder="0">
                            </div>
                            <div class="flex-1 text-center font-semibold">
                                <span class="tooltip">
                                    ${match.away}
                                    <span class="rating ${teamRatings[match.away] >= 85 ? 'rating-high' : teamRatings[match.away] >= 65 ? 'rating-mid' : 'rating-low'}">${teamRatings[match.away]}</span>
                                    <span class="tooltip-text">Team strength rating based on last 3 seasons' UEFA coefficients, goals, and squad value.</span>
                                </span>
                            </div>
                        </div>
                        <div class="text-sm text-gray-400 text-center">${match.date} ${match.time}</div>
                    `;
                    contentDiv.appendChild(matchDiv);
                });
                matchdaysDiv.appendChild(matchdayDiv);

                matchdayDiv.querySelector(".matchday-header").addEventListener("click", () => {
                    const content = matchdayDiv.querySelector(".matchday-content");
                    const toggle = matchdayDiv.querySelector(".matchday-toggle");
                    content.classList.toggle("hidden");
                    toggle.classList.toggle("rotate-180");
                });
            });

            document.querySelectorAll(".score-input").forEach(input => {
                input.addEventListener("input", updateLeagueTable);
            });

            document.getElementById("reset-button").addEventListener("click", () => {
                document.querySelectorAll(".score-input").forEach(input => {
                    input.value = "";
                });
                updateLeagueTable();
            });

            document.getElementById("predict-button").addEventListener("click", () => {
                matches.flat().forEach((match, index) => {
                    const [homeGoals, awayGoals] = predictScore(match.home, match.away);
                    document.getElementById(`home-score-${index}`).value = homeGoals;
                    document.getElementById(`away-score-${index}`).value = awayGoals;
                });
                updateLeagueTable();
            });
        }

        renderMatches();
        updateLeagueTable();
    </script>
</body>
</html>